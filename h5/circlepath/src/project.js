require=function s(a,n,h){function l(o,t){if(!n[o]){if(!a[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(c)return c(o,!0);var i=new Error("Cannot find module '"+o+"'");throw i.code="MODULE_NOT_FOUND",i}var r=n[o]={exports:{}};a[o][0].call(r.exports,function(t){return l(a[o][1][t]||t)},r,r.exports,s,a,n,h)}return n[o].exports}for(var c="function"==typeof require&&require,t=0;t<h.length;t++)l(h[t]);return l}({HelloWorld:[function(t,o,e){"use strict";cc._RF.push(o,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld");var h=120,a=["62bd18","ffbb00","ff5300","d21034","ff475c","8f16b2"];cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,highScoresText:cc.Label,curScoresText:cc.Label,targetBox:cc.Node,ballBox:cc.Node,gameBox:cc.Node,armSF:cc.SpriteFrame,ballSF:cc.SpriteFrame,targetSF:cc.SpriteFrame},onLoad:function(){this.highScores=cc.sys.localStorage.getItem("HS")?cc.sys.localStorage.getItem("HS"):0,this.highScoresText.string="最高分数:"+this.highScores;var t;cc.view.getFrameSize();for(this.bgColorCode=a[parseInt(Math.random()*a.length)],this.bg.node.color=cc.hexToColor("#"+this.bgColorCode);(t=a[parseInt(Math.random()*a.length)])===this.bgColorCode;);this.saveRotationSpeed=4,this.rotatingDirection=Math.floor(2*Math.random()),this.destroy=!1,this.steps=0,this.groupList=cc.game.groupList;var o=new cc.Node("arm");this.ballBox.addChild(o),o.setPosition(0,-100),this.arm=o.addComponent(cc.Sprite),this.arm.spriteFrame=this.armSF,o.color=cc.hexToColor("#"+t),o.anchorX=1,o.group=this.groupList[3];var e=new cc.Node("ballNode1");this.ballBox.addChild(e),e.setPosition(0,-100),this.ball1=e.addComponent(cc.Sprite),this.ball1.spriteFrame=this.ballSF,e.color=cc.hexToColor("#"+t),e.group=this.groupList[3];var i=new cc.Node("ballNode2");this.ballBox.addChild(i),i.setPosition(-120,-100),this.ball2=i.addComponent(cc.Sprite),this.ball2.spriteFrame=this.ballSF,i.color=cc.hexToColor("#"+t),i.group=this.groupList[3],this.balls=[this.ball1,this.ball2],this.rotationAngle=0,this.rotationBall=1,this.targetArray=[];var r=new cc.Node("targetNode");r.x=this.balls[0].node.x,r.y=this.balls[0].node.y,r.addComponent(cc.Sprite).spriteFrame=this.targetSF,this.targetBox.addChild(r),this.targetArray.push(r);for(var s=0;s<7;s++)this.addTarget();this.node.on(cc.Node.EventType.TOUCH_START,this.changeBall,this)},addTarget:function(){this.steps++;var t=this.targetArray[this.targetArray.length-1].x,o=this.targetArray[this.targetArray.length-1].y,e=Math.floor(60*Math.random()),i=Math.floor(2*Math.random()),r=new cc.Node("targetNode"),s=h*Math.sin(cc.degreesToRadians(e)),a=h*Math.cos(cc.degreesToRadians(e));r.x=i?t+s:t-s,r.y=o+a,r.addComponent(cc.Sprite).spriteFrame=this.targetSF;var n=new cc.Node("Label");r.addChild(n),n.addComponent(cc.Label).string=""+this.steps,n.color=cc.hexToColor("#"+this.bgColorCode),this.targetBox.addChild(r),this.targetArray.push(r)},update:function(){var t=cc.pDistance(this.balls[this.rotationBall].node.position,this.targetArray[1].position);90<t&&this.destroy&&7<this.steps&&this.gameOver(),t<40&&!this.destroy&&(this.destroy=!0),this.rotationAngle=(this.rotationAngle+this.saveRotationSpeed*(2*this.rotatingDirection-1))%360,this.arm.node&&(this.arm.node.rotation=this.rotationAngle+180,this.balls[this.rotationBall].node.x=this.balls[1-this.rotationBall].node.x+h*Math.cos(cc.degreesToRadians(this.rotationAngle)),this.balls[this.rotationBall].node.y=this.balls[1-this.rotationBall].node.y-h*Math.sin(cc.degreesToRadians(this.rotationAngle)));var o=this.node.convertToWorldSpace(this.balls[1-this.rotationBall].node.position).x,e=this.node.convertToWorldSpace(this.balls[1-this.rotationBall].node.position).y+100;this.gameBox.position;this.gameBox.x=-o,this.gameBox.y=-e},changeBall:function(){this.destroy=!1;var t=cc.pDistance(this.balls[this.rotationBall].node.position,this.targetArray[1].position);this.rotatingDirection=Math.floor(2*Math.random()),console.log(t),t<20?(this.targetArray[0].runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){this.targetArray[0].destroy(),this.targetArray.shift()},this))),this.arm.node.position=this.balls[this.rotationBall].node.position,this.rotationBall=1-this.rotationBall,this.rotationAngle=cc.pAngle(this.balls[1-this.rotationBall].node.position,this.balls[this.rotationBall].node.position)+90,this.arm.node.rotation=this.rotationAngle-90,this.addTarget(),this.curScoresText.string="当前分数："+(this.steps-7)):this.gameOver()},gameOver:function(){cc.sys.localStorage.setItem("HS",Math.max(this.highScores,this.steps-7)),this.node.off(cc.Node.EventType.TOUCH_START,this.changeBall,this),this.saveRotationSpeed=0,this.arm.node.destroy(),this.destroy=!1,this.balls[1-this.rotationBall].node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){cc.director.loadScene("helloworld")},this)))}}),cc._RF.pop()},{}]},{},["HelloWorld"]);